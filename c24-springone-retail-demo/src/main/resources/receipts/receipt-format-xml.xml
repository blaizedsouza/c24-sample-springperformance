<!--
 | Copyright 2012 C24 Technologies.
 | 
 | Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), 
 | to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, 
 | and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
 |
 | The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
 |
 | THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
 | FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL C24 TECHNOLOGIES BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, 
 | WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE 
 | SOFTWARE.
-->

<!-- ======================================================= -->
<!-- Sample logic to parse and normalise XML receipts        -->
<!-- Uses C24's Integration Objects to parse and transform   -->
<!-- @author Andrew Elmore                                   -->
<!-- ======================================================= -->

<beans:beans xmlns="http://www.springframework.org/schema/integration" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:beans="http://www.springframework.org/schema/beans"
  xmlns:c24="http://schema.c24.biz/spring-core"
  xmlns:int-c24="http://schema.c24.biz/spring-integration"
  xsi:schemaLocation="
    http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration.xsd
    http://schema.c24.biz/spring-core http://schema.c24.biz/spring-core.xsd
    http://schema.c24.biz/spring-integration http://schema.c24.biz/spring-integration.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">


	<!-- Process inbound XML receipts -->
	
    <channel id="inbound.receipt.xml"/>

	<!-- The type of message we expect to parse -->
	<!-- Auto-generated by Integration Objects -->
    <c24:model id="receiptXmlModel" base-element="biz.c24.retaildemo.model.xml.ReceiptElement"/>

   	<chain input-channel="inbound.receipt.xml" output-channel="persistReceipts">
		<!-- Parse the message -->
    	<int-c24:unmarshalling-transformer model-ref="receiptXmlModel"/>
        <!-- Transform to our normalised format -->
        <int-c24:transformer transform-class="biz.c24.retaildemo.transform.ReceiptXmlToJavaTransform" 
                             target-class="biz.c24.retaildemo.model.Receipt"/>
                             
    </chain>
    
</beans:beans>